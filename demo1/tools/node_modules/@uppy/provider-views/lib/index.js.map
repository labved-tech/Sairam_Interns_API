{"version":3,"sources":["index.js"],"names":["require","h","Component","AuthView","Browser","LoaderView","generateFileID","getFileType","isPreviewSupported","findIndex","array","predicate","i","length","getOrigin","location","origin","protocol","hostname","port","CloseWrapper","componentWillUnmount","props","onUnmount","render","children","module","exports","plugin","opts","provider","defaultOptions","viewType","showTitles","showFilter","showBreadcrumbs","addFile","bind","filterItems","filterQuery","toggleSearch","getFolder","getNextFolder","logout","preFirstRender","handleAuth","sortByTitle","sortByDate","isActiveRow","isChecked","toggleCheckbox","handleError","handleScroll","listAllFiles","donePicking","cancelPicking","clearSelection","setPluginState","authenticated","files","folders","directories","activeRow","filterInput","isSearchVisible","tearDown","_updateFilesAndFolders","res","nextPagePath","items","forEach","item","isFolder","push","didFirstRender","onFirstRender","id","name","_loaderWrapper","list","updatedDirectories","state","getPluginState","index","dir","slice","concat","title","username","folder","requestPath","lastCheckbox","undefined","file","tagFile","providerFileToId","source","data","type","mimeType","isRemote","body","fileId","remote","companionUrl","url","fileUrl","providerOptions","fileType","preview","thumbnail","uppy","log","err","isRestriction","removeFile","currentSelection","filter","then","ok","revoked","message","i18n","manual_revoke_url","info","newState","catch","e","target","value","inputEl","toLowerCase","indexOf","sorting","sortedFiles","sort","fileA","fileB","localeCompare","sortedFolders","folderA","folderB","a","Date","modifiedDate","b","sortBySize","getItemData","size","getItemId","some","addFolder","folderId","selectedFolders","loading","count","success","ids","map","smart_count","stopPropagation","preventDefault","currentTarget","focus","shiftKey","prevIndex","currentIndex","authState","btoa","JSON","stringify","clientVersion","encodeURIComponent","ProviderView","VERSION","link","authUrl","authWindow","window","open","handleToken","_isOriginAllowed","companionAllowedHosts","parse","token","close","removeEventListener","setAuthToken","addEventListener","allowedOrigin","getRegex","RegExp","patterns","Array","isArray","pattern","test","error","toString","isAuthError","details","scrollPos","scrollHeight","scrollTop","offsetHeight","path","_isHandlingScroll","Promise","resolve","reject","moreFiles","promises","all","dashboard","getPlugin","hideAllPanels","promise","catch_","result","viewOptions","icon","i18nArray","targetViewOptions","browserProps","done","cancel","pluginIcon"],"mappings":";;;;;;eAAyBA,OAAO,CAAC,QAAD,C;IAAxBC,C,YAAAA,C;IAAGC,S,YAAAA,S;;AACX,IAAMC,QAAQ,GAAGH,OAAO,CAAC,YAAD,CAAxB;;AACA,IAAMI,OAAO,GAAGJ,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAMK,UAAU,GAAGL,OAAO,CAAC,UAAD,CAA1B;;AACA,IAAMM,cAAc,GAAGN,OAAO,CAAC,gCAAD,CAA9B;;AACA,IAAMO,WAAW,GAAGP,OAAO,CAAC,6BAAD,CAA3B;;AACA,IAAMQ,kBAAkB,GAAGR,OAAO,CAAC,oCAAD,CAAlC;AAEA;;;;;AAGA,SAASS,SAAT,CAAoBC,KAApB,EAA2BC,SAA3B,EAAsC;AACpC,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,QAAID,SAAS,CAACD,KAAK,CAACE,CAAD,CAAN,CAAb,EAAyB,OAAOA,CAAP;AAC1B;;AACD,SAAO,CAAC,CAAR;AACD,C,CAED;;;AACA,SAASE,SAAT,GAAsB;AACpB,MAAI,YAAYC,QAAhB,EAA0B;AACxB,WAAOA,QAAQ,CAACC,MAAhB,CADwB,CACD;AACxB;;AACD,SAAUD,QAAQ,CAACE,QAAnB,UAAgCF,QAAQ,CAACG,QAAzC,IAAoDH,QAAQ,CAACI,IAAT,SAAoBJ,QAAQ,CAACI,IAA7B,GAAsC,EAA1F;AACD;;IAEKC,Y;;;;;;;;;SACJC,oB,GAAA,gCAAwB;AACtB,SAAKC,KAAL,CAAWC,SAAX;AACD,G;;SAEDC,M,GAAA,kBAAU;AACR,WAAO,KAAKF,KAAL,CAAWG,QAAX,CAAoB,CAApB,CAAP;AACD,G;;;EAPwBvB,S;AAU3B;;;;;AAGAwB,MAAM,CAACC,OAAP;AAGE;;;;AAIA,wBAAaC,MAAb,EAAqBC,IAArB,EAA2B;AACzB,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKE,QAAL,GAAgBD,IAAI,CAACC,QAArB,CAFyB,CAIzB;;AACA,QAAMC,cAAc,GAAG;AACrBC,MAAAA,QAAQ,EAAE,MADW;AAErBC,MAAAA,UAAU,EAAE,IAFS;AAGrBC,MAAAA,UAAU,EAAE,IAHS;AAIrBC,MAAAA,eAAe,EAAE;AAJI,KAAvB,CALyB,CAYzB;;AACA,SAAKN,IAAL,gBAAiBE,cAAjB,EAAoCF,IAApC,EAbyB,CAezB;;AACA,SAAKO,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKG,YAAL,GAAoB,KAAKA,YAAL,CAAkBH,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKI,SAAL,GAAiB,KAAKA,SAAL,CAAeJ,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKK,aAAL,GAAqB,KAAKA,aAAL,CAAmBL,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKM,MAAL,GAAc,KAAKA,MAAL,CAAYN,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKO,cAAL,GAAsB,KAAKA,cAAL,CAAoBP,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKQ,UAAL,GAAkB,KAAKA,UAAL,CAAgBR,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKS,WAAL,GAAmB,KAAKA,WAAL,CAAiBT,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKU,UAAL,GAAkB,KAAKA,UAAL,CAAgBV,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKW,WAAL,GAAmB,KAAKA,WAAL,CAAiBX,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKY,SAAL,GAAiB,KAAKA,SAAL,CAAeZ,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKa,cAAL,GAAsB,KAAKA,cAAL,CAAoBb,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKc,WAAL,GAAmB,KAAKA,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKe,YAAL,GAAoB,KAAKA,YAAL,CAAkBf,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKgB,YAAL,GAAoB,KAAKA,YAAL,CAAkBhB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKiB,WAAL,GAAmB,KAAKA,WAAL,CAAiBjB,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKkB,aAAL,GAAqB,KAAKA,aAAL,CAAmBlB,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKmB,cAAL,GAAsB,KAAKA,cAAL,CAAoBnB,IAApB,CAAyB,IAAzB,CAAtB,CAnCyB,CAqCzB;;AACA,SAAKb,MAAL,GAAc,KAAKA,MAAL,CAAYa,IAAZ,CAAiB,IAAjB,CAAd;AAEA,SAAKmB,cAAL,GAxCyB,CA0CzB;;AACA,SAAK5B,MAAL,CAAY6B,cAAZ,CAA2B;AACzBC,MAAAA,aAAa,EAAE,KADU;AAEzBC,MAAAA,KAAK,EAAE,EAFkB;AAGzBC,MAAAA,OAAO,EAAE,EAHgB;AAIzBC,MAAAA,WAAW,EAAE,EAJY;AAKzBC,MAAAA,SAAS,EAAE,CAAC,CALa;AAMzBC,MAAAA,WAAW,EAAE,EANY;AAOzBC,MAAAA,eAAe,EAAE;AAPQ,KAA3B;AASD;;AA3DH;;AAAA,UA6DEC,QA7DF,GA6DE,oBAAY,CACV;AACD,GA/DH;;AAAA,UAiEEC,sBAjEF,GAiEE,gCAAwBC,GAAxB,EAA6BR,KAA7B,EAAoCC,OAApC,EAA6C;AAC3C,SAAKQ,YAAL,GAAoBD,GAAG,CAACC,YAAxB;AACAD,IAAAA,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkB,UAACC,IAAD,EAAU;AAC1B,UAAIA,IAAI,CAACC,QAAT,EAAmB;AACjBZ,QAAAA,OAAO,CAACa,IAAR,CAAaF,IAAb;AACD,OAFD,MAEO;AACLZ,QAAAA,KAAK,CAACc,IAAN,CAAWF,IAAX;AACD;AACF,KAND;AAQA,SAAK3C,MAAL,CAAY6B,cAAZ,CAA2B;AAAEG,MAAAA,OAAO,EAAPA,OAAF;AAAWD,MAAAA,KAAK,EAALA;AAAX,KAA3B;AACD;AAED;;;;AA9EF;;AAAA,UAkFEf,cAlFF,GAkFE,0BAAkB;AAChB,SAAKhB,MAAL,CAAY6B,cAAZ,CAA2B;AAAEiB,MAAAA,cAAc,EAAE;AAAlB,KAA3B;AACA,SAAK9C,MAAL,CAAY+C,aAAZ;AACD;AAED;;;;;;AAvFF;;AAAA,UA6FElC,SA7FF,GA6FE,mBAAWmC,EAAX,EAAeC,IAAf,EAAqB;AAAA;;AACnB,WAAO,KAAKC,cAAL,CACL,KAAKhD,QAAL,CAAciD,IAAd,CAAmBH,EAAnB,CADK,EAEL,UAACT,GAAD,EAAS;AACP,UAAMP,OAAO,GAAG,EAAhB;AACA,UAAMD,KAAK,GAAG,EAAd;AACA,UAAIqB,kBAAJ;;AAEA,UAAMC,KAAK,GAAG,KAAI,CAACrD,MAAL,CAAYsD,cAAZ,EAAd;;AACA,UAAMC,KAAK,GAAG1E,SAAS,CAACwE,KAAK,CAACpB,WAAP,EAAoB,UAACuB,GAAD;AAAA,eAASR,EAAE,KAAKQ,GAAG,CAACR,EAApB;AAAA,OAApB,CAAvB;;AAEA,UAAIO,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBH,QAAAA,kBAAkB,GAAGC,KAAK,CAACpB,WAAN,CAAkBwB,KAAlB,CAAwB,CAAxB,EAA2BF,KAAK,GAAG,CAAnC,CAArB;AACD,OAFD,MAEO;AACLH,QAAAA,kBAAkB,GAAGC,KAAK,CAACpB,WAAN,CAAkByB,MAAlB,CAAyB,CAAC;AAAEV,UAAAA,EAAE,EAAFA,EAAF;AAAMW,UAAAA,KAAK,EAAEV;AAAb,SAAD,CAAzB,CAArB;AACD;;AAED,MAAA,KAAI,CAACW,QAAL,GAAgBrB,GAAG,CAACqB,QAAJ,IAAgB,KAAI,CAACA,QAArC;;AACA,MAAA,KAAI,CAACtB,sBAAL,CAA4BC,GAA5B,EAAiCR,KAAjC,EAAwCC,OAAxC;;AACA,MAAA,KAAI,CAAChC,MAAL,CAAY6B,cAAZ,CAA2B;AAAEI,QAAAA,WAAW,EAAEmB;AAAf,OAA3B;AACD,KAnBI,EAoBL,KAAK7B,WApBA,CAAP;AAqBD;AAED;;;;;;AArHF;;AAAA,UA2HET,aA3HF,GA2HE,uBAAe+C,MAAf,EAAuB;AACrB,SAAKhD,SAAL,CAAegD,MAAM,CAACC,WAAtB,EAAmCD,MAAM,CAACZ,IAA1C;AACA,SAAKc,YAAL,GAAoBC,SAApB;AACD,GA9HH;;AAAA,UAgIExD,OAhIF,GAgIE,iBAASyD,IAAT,EAAe;AACb,QAAMC,OAAO,GAAG;AACdlB,MAAAA,EAAE,EAAE,KAAKmB,gBAAL,CAAsBF,IAAtB,CADU;AAEdG,MAAAA,MAAM,EAAE,KAAKpE,MAAL,CAAYgD,EAFN;AAGdqB,MAAAA,IAAI,EAAEJ,IAHQ;AAIdhB,MAAAA,IAAI,EAAEgB,IAAI,CAAChB,IAAL,IAAagB,IAAI,CAACjB,EAJV;AAKdsB,MAAAA,IAAI,EAAEL,IAAI,CAACM,QALG;AAMdC,MAAAA,QAAQ,EAAE,IANI;AAOdC,MAAAA,IAAI,EAAE;AACJC,QAAAA,MAAM,EAAET,IAAI,CAACjB;AADT,OAPQ;AAUd2B,MAAAA,MAAM,EAAE;AACNC,QAAAA,YAAY,EAAE,KAAK5E,MAAL,CAAYC,IAAZ,CAAiB2E,YADzB;AAENC,QAAAA,GAAG,OAAK,KAAK3E,QAAL,CAAc4E,OAAd,CAAsBb,IAAI,CAACH,WAA3B,CAFF;AAGNW,QAAAA,IAAI,EAAE;AACJC,UAAAA,MAAM,EAAET,IAAI,CAACjB;AADT,SAHA;AAMN+B,QAAAA,eAAe,EAAE,KAAK7E,QAAL,CAAcD;AANzB;AAVM,KAAhB;AAoBA,QAAM+E,QAAQ,GAAGrG,WAAW,CAACuF,OAAD,CAA5B,CArBa,CAsBb;;AACA,QAAIc,QAAQ,IAAIpG,kBAAkB,CAACoG,QAAD,CAAlC,EAA8C;AAC5Cd,MAAAA,OAAO,CAACe,OAAR,GAAkBhB,IAAI,CAACiB,SAAvB;AACD;;AACD,SAAKlF,MAAL,CAAYmF,IAAZ,CAAiBC,GAAjB,CAAqB,oBAArB;;AACA,QAAI;AACF,WAAKpF,MAAL,CAAYmF,IAAZ,CAAiB3E,OAAjB,CAAyB0D,OAAzB;AACA,aAAO,IAAP;AACD,KAHD,CAGE,OAAOmB,GAAP,EAAY;AACZ,UAAI,CAACA,GAAG,CAACC,aAAT,EAAwB;AACtB,aAAKtF,MAAL,CAAYmF,IAAZ,CAAiBC,GAAjB,CAAqBC,GAArB;AACD;;AACD,aAAO,KAAP;AACD;AACF,GApKH;;AAAA,UAsKEE,UAtKF,GAsKE,oBAAYvC,EAAZ,EAAgB;AAAA,gCACe,KAAKhD,MAAL,CAAYsD,cAAZ,EADf;AAAA,QACNkC,gBADM,yBACNA,gBADM;;AAEd,SAAKxF,MAAL,CAAY6B,cAAZ,CAA2B;AACzB2D,MAAAA,gBAAgB,EAAEA,gBAAgB,CAACC,MAAjB,CAAwB,UAACxB,IAAD;AAAA,eAAUA,IAAI,CAACjB,EAAL,KAAYA,EAAtB;AAAA,OAAxB;AADO,KAA3B;AAGD;AAED;;;AA7KF;;AAAA,UAgLEjC,MAhLF,GAgLE,kBAAU;AAAA;;AACR,SAAKb,QAAL,CAAca,MAAd,GACG2E,IADH,CACQ,UAACnD,GAAD,EAAS;AACb,UAAIA,GAAG,CAACoD,EAAR,EAAY;AACV,YAAI,CAACpD,GAAG,CAACqD,OAAT,EAAkB;AAChB,cAAMC,OAAO,GAAG,MAAI,CAAC7F,MAAL,CAAYmF,IAAZ,CAAiBW,IAAjB,CAAsB,0BAAtB,EAAkD;AAChE5F,YAAAA,QAAQ,EAAE,MAAI,CAACF,MAAL,CAAY2D,KAD0C;AAEhEkB,YAAAA,GAAG,EAAEtC,GAAG,CAACwD;AAFuD,WAAlD,CAAhB;;AAIA,UAAA,MAAI,CAAC/F,MAAL,CAAYmF,IAAZ,CAAiBa,IAAjB,CAAsBH,OAAtB,EAA+B,MAA/B,EAAuC,IAAvC;AACD;;AAED,YAAMI,QAAQ,GAAG;AACfnE,UAAAA,aAAa,EAAE,KADA;AAEfC,UAAAA,KAAK,EAAE,EAFQ;AAGfC,UAAAA,OAAO,EAAE,EAHM;AAIfC,UAAAA,WAAW,EAAE;AAJE,SAAjB;;AAMA,QAAA,MAAI,CAACjC,MAAL,CAAY6B,cAAZ,CAA2BoE,QAA3B;AACD;AACF,KAnBH,EAmBKC,KAnBL,CAmBW,KAAK3E,WAnBhB;AAoBD,GArMH;;AAAA,UAuMEZ,WAvMF,GAuME,qBAAawF,CAAb,EAAgB;AACd,QAAM9C,KAAK,GAAG,KAAKrD,MAAL,CAAYsD,cAAZ,EAAd;AACA,SAAKtD,MAAL,CAAY6B,cAAZ,CAA2B,SAAc,EAAd,EAAkBwB,KAAlB,EAAyB;AAClDlB,MAAAA,WAAW,EAAEgE,CAAC,GAAGA,CAAC,CAACC,MAAF,CAASC,KAAZ,GAAoB;AADgB,KAAzB,CAA3B;AAGD,GA5MH;;AAAA,UA8MEzF,YA9MF,GA8ME,sBAAc0F,OAAd,EAAuB;AACrB,QAAMjD,KAAK,GAAG,KAAKrD,MAAL,CAAYsD,cAAZ,EAAd;AAEA,SAAKtD,MAAL,CAAY6B,cAAZ,CAA2B;AACzBO,MAAAA,eAAe,EAAE,CAACiB,KAAK,CAACjB,eADC;AAEzBD,MAAAA,WAAW,EAAE;AAFY,KAA3B;AAID,GArNH;;AAAA,UAuNEzB,WAvNF,GAuNE,qBAAa+B,KAAb,EAAoB;AAClB,QAAMY,KAAK,GAAG,KAAKrD,MAAL,CAAYsD,cAAZ,EAAd;;AACA,QAAI,CAACD,KAAK,CAAClB,WAAP,IAAsBkB,KAAK,CAAClB,WAAN,KAAsB,EAAhD,EAAoD;AAClD,aAAOM,KAAP;AACD;;AACD,WAAOA,KAAK,CAACgD,MAAN,CAAa,UAAC5B,MAAD,EAAY;AAC9B,aAAOA,MAAM,CAACZ,IAAP,CAAYsD,WAAZ,GAA0BC,OAA1B,CAAkCnD,KAAK,CAAClB,WAAN,CAAkBoE,WAAlB,EAAlC,MAAuE,CAAC,CAA/E;AACD,KAFM,CAAP;AAGD,GA/NH;;AAAA,UAiOErF,WAjOF,GAiOE,uBAAe;AACb,QAAMmC,KAAK,GAAG,SAAc,EAAd,EAAkB,KAAKrD,MAAL,CAAYsD,cAAZ,EAAlB,CAAd;;AADa,QAELvB,KAFK,GAEuBsB,KAFvB,CAELtB,KAFK;AAAA,QAEEC,OAFF,GAEuBqB,KAFvB,CAEErB,OAFF;AAAA,QAEWyE,OAFX,GAEuBpD,KAFvB,CAEWoD,OAFX;AAIb,QAAMC,WAAW,GAAG3E,KAAK,CAAC4E,IAAN,CAAW,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC/C,UAAIJ,OAAO,KAAK,iBAAhB,EAAmC;AACjC,eAAOI,KAAK,CAAC5D,IAAN,CAAW6D,aAAX,CAAyBF,KAAK,CAAC3D,IAA/B,CAAP;AACD;;AACD,aAAO2D,KAAK,CAAC3D,IAAN,CAAW6D,aAAX,CAAyBD,KAAK,CAAC5D,IAA/B,CAAP;AACD,KALmB,CAApB;AAOA,QAAM8D,aAAa,GAAG/E,OAAO,CAAC2E,IAAR,CAAa,UAACK,OAAD,EAAUC,OAAV,EAAsB;AACvD,UAAIR,OAAO,KAAK,iBAAhB,EAAmC;AACjC,eAAOQ,OAAO,CAAChE,IAAR,CAAa6D,aAAb,CAA2BE,OAAO,CAAC/D,IAAnC,CAAP;AACD;;AACD,aAAO+D,OAAO,CAAC/D,IAAR,CAAa6D,aAAb,CAA2BG,OAAO,CAAChE,IAAnC,CAAP;AACD,KALqB,CAAtB;AAOA,SAAKjD,MAAL,CAAY6B,cAAZ,CAA2B,SAAc,EAAd,EAAkBwB,KAAlB,EAAyB;AAClDtB,MAAAA,KAAK,EAAE2E,WAD2C;AAElD1E,MAAAA,OAAO,EAAE+E,aAFyC;AAGlDN,MAAAA,OAAO,EAAGA,OAAO,KAAK,iBAAb,GAAkC,gBAAlC,GAAqD;AAHZ,KAAzB,CAA3B;AAKD,GAxPH;;AAAA,UA0PEtF,UA1PF,GA0PE,sBAAc;AACZ,QAAMkC,KAAK,GAAG,SAAc,EAAd,EAAkB,KAAKrD,MAAL,CAAYsD,cAAZ,EAAlB,CAAd;;AADY,QAEJvB,KAFI,GAEwBsB,KAFxB,CAEJtB,KAFI;AAAA,QAEGC,OAFH,GAEwBqB,KAFxB,CAEGrB,OAFH;AAAA,QAEYyE,OAFZ,GAEwBpD,KAFxB,CAEYoD,OAFZ;AAIZ,QAAMC,WAAW,GAAG3E,KAAK,CAAC4E,IAAN,CAAW,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC/C,UAAMK,CAAC,GAAG,IAAIC,IAAJ,CAASP,KAAK,CAACQ,YAAf,CAAV;AACA,UAAMC,CAAC,GAAG,IAAIF,IAAJ,CAASN,KAAK,CAACO,YAAf,CAAV;;AAEA,UAAIX,OAAO,KAAK,gBAAhB,EAAkC;AAChC,eAAOS,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAaH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAY,CAAhC;AACD;;AACD,aAAOH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAYH,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAhC;AACD,KARmB,CAApB;AAUA,QAAMN,aAAa,GAAG/E,OAAO,CAAC2E,IAAR,CAAa,UAACK,OAAD,EAAUC,OAAV,EAAsB;AACvD,UAAMC,CAAC,GAAG,IAAIC,IAAJ,CAASH,OAAO,CAACI,YAAjB,CAAV;AACA,UAAMC,CAAC,GAAG,IAAIF,IAAJ,CAASF,OAAO,CAACG,YAAjB,CAAV;;AAEA,UAAIX,OAAO,KAAK,gBAAhB,EAAkC;AAChC,eAAOS,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAaH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAY,CAAhC;AACD;;AAED,aAAOH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAYH,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAhC;AACD,KATqB,CAAtB;AAWA,SAAKrH,MAAL,CAAY6B,cAAZ,CAA2B,SAAc,EAAd,EAAkBwB,KAAlB,EAAyB;AAClDtB,MAAAA,KAAK,EAAE2E,WAD2C;AAElD1E,MAAAA,OAAO,EAAE+E,aAFyC;AAGlDN,MAAAA,OAAO,EAAGA,OAAO,KAAK,gBAAb,GAAiC,eAAjC,GAAmD;AAHV,KAAzB,CAA3B;AAKD,GAxRH;;AAAA,UA0REa,UA1RF,GA0RE,sBAAc;AACZ,QAAMjE,KAAK,GAAG,SAAc,EAAd,EAAkB,KAAKrD,MAAL,CAAYsD,cAAZ,EAAlB,CAAd;;AADY,QAEJvB,KAFI,GAEesB,KAFf,CAEJtB,KAFI;AAAA,QAEG0E,OAFH,GAEepD,KAFf,CAEGoD,OAFH,EAIZ;;AACA,QAAI,CAAC1E,KAAK,CAAC9C,MAAP,IAAiB,CAAC,KAAKe,MAAL,CAAYuH,WAAZ,CAAwBxF,KAAK,CAAC,CAAD,CAA7B,EAAkCyF,IAAxD,EAA8D;AAC5D;AACD;;AAED,QAAMd,WAAW,GAAG3E,KAAK,CAAC4E,IAAN,CAAW,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC/C,UAAMK,CAAC,GAAGN,KAAK,CAACY,IAAhB;AACA,UAAMH,CAAC,GAAGR,KAAK,CAACW,IAAhB;;AAEA,UAAIf,OAAO,KAAK,gBAAhB,EAAkC;AAChC,eAAOS,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAaH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAY,CAAhC;AACD;;AACD,aAAOH,CAAC,GAAGG,CAAJ,GAAQ,CAAR,GAAYH,CAAC,GAAGG,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAhC;AACD,KARmB,CAApB;AAUA,SAAKrH,MAAL,CAAY6B,cAAZ,CAA2B,SAAc,EAAd,EAAkBwB,KAAlB,EAAyB;AAClDtB,MAAAA,KAAK,EAAE2E,WAD2C;AAElDD,MAAAA,OAAO,EAAGA,OAAO,KAAK,gBAAb,GAAiC,eAAjC,GAAmD;AAFV,KAAzB,CAA3B;AAID,GAjTH;;AAAA,UAmTErF,WAnTF,GAmTE,qBAAa6C,IAAb,EAAmB;AACjB,WAAO,KAAKjE,MAAL,CAAYsD,cAAZ,GAA6BpB,SAA7B,KAA2C,KAAKlC,MAAL,CAAYyH,SAAZ,CAAsBxD,IAAtB,CAAlD;AACD,GArTH;;AAAA,UAuTE5C,SAvTF,GAuTE,mBAAW4C,IAAX,EAAiB;AAAA,iCACc,KAAKjE,MAAL,CAAYsD,cAAZ,EADd;AAAA,QACPkC,gBADO,0BACPA,gBADO,EAEf;AACA;;;AACA,WAAOA,gBAAgB,CAACkC,IAAjB,CAAsB,UAAC/E,IAAD;AAAA,aAAUA,IAAI,CAACK,EAAL,KAAYiB,IAAI,CAACjB,EAA3B;AAAA,KAAtB,CAAP;AACD;AAED;;;;;;AA9TF;;AAAA,UAoUE2E,SApUF,GAoUE,mBAAW9D,MAAX,EAAmB;AAAA;;AACjB,QAAM+D,QAAQ,GAAG,KAAKzD,gBAAL,CAAsBN,MAAtB,CAAjB;AACA,QAAMR,KAAK,GAAG,KAAKrD,MAAL,CAAYsD,cAAZ,EAAd;;AACA,QAAMtB,OAAO,gBAAQqB,KAAK,CAACwE,eAAd,CAAb;;AACA,QAAID,QAAQ,IAAI5F,OAAZ,IAAuBA,OAAO,CAAC4F,QAAD,CAAP,CAAkBE,OAA7C,EAAsD;AACpD;AACD;;AACD9F,IAAAA,OAAO,CAAC4F,QAAD,CAAP,GAAoB;AAAEE,MAAAA,OAAO,EAAE,IAAX;AAAiB/F,MAAAA,KAAK,EAAE;AAAxB,KAApB;AACA,SAAK/B,MAAL,CAAY6B,cAAZ,CAA2B;AAAEgG,MAAAA,eAAe,eAAO7F,OAAP;AAAjB,KAA3B;AACA,WAAO,KAAKP,YAAL,CAAkBoC,MAAM,CAACC,WAAzB,EAAsC4B,IAAtC,CAA2C,UAAC3D,KAAD,EAAW;AAC3D,UAAIgG,KAAK,GAAG,CAAZ;AACAhG,MAAAA,KAAK,CAACW,OAAN,CAAc,UAACuB,IAAD,EAAU;AACtB,YAAM+D,OAAO,GAAG,MAAI,CAACxH,OAAL,CAAayD,IAAb,CAAhB;;AACA,YAAI+D,OAAJ,EAAaD,KAAK;AACnB,OAHD;AAIA,UAAME,GAAG,GAAGlG,KAAK,CAACmG,GAAN,CAAU,MAAI,CAAC/D,gBAAf,CAAZ;AACAnC,MAAAA,OAAO,CAAC4F,QAAD,CAAP,GAAoB;AAClBE,QAAAA,OAAO,EAAE,KADS;AAElB/F,QAAAA,KAAK,EAAEkG;AAFW,OAApB;;AAIA,MAAA,MAAI,CAACjI,MAAL,CAAY6B,cAAZ,CAA2B;AAAEgG,QAAAA,eAAe,EAAE7F;AAAnB,OAA3B;;AAEA,UAAI6D,OAAJ;;AACA,UAAI9D,KAAK,CAAC9C,MAAV,EAAkB;AAChB4G,QAAAA,OAAO,GAAG,MAAI,CAAC7F,MAAL,CAAYmF,IAAZ,CAAiBW,IAAjB,CAAsB,aAAtB,EAAqC;AAC7CqC,UAAAA,WAAW,EAAEJ,KADgC;AACzBlE,UAAAA,MAAM,EAAEA,MAAM,CAACZ;AADU,SAArC,CAAV;AAGD,OAJD,MAIO;AACL4C,QAAAA,OAAO,GAAG,MAAI,CAAC7F,MAAL,CAAYmF,IAAZ,CAAiBW,IAAjB,CAAsB,kBAAtB,CAAV;AACD;;AACD,MAAA,MAAI,CAAC9F,MAAL,CAAYmF,IAAZ,CAAiBa,IAAjB,CAAsBH,OAAtB;AACD,KAtBM,EAsBJK,KAtBI,CAsBE,UAACC,CAAD,EAAO;AACd,UAAM9C,KAAK,GAAG,MAAI,CAACrD,MAAL,CAAYsD,cAAZ,EAAd;;AACA,UAAMuE,eAAe,gBAAQxE,KAAK,CAACwE,eAAd,CAArB;;AACA,aAAOA,eAAe,CAACD,QAAD,CAAtB;;AACA,MAAA,MAAI,CAAC5H,MAAL,CAAY6B,cAAZ,CAA2B;AAAEgG,QAAAA,eAAe,EAAfA;AAAF,OAA3B;;AACA,MAAA,MAAI,CAACtG,WAAL,CAAiB4E,CAAjB;AACD,KA5BM,CAAP;AA6BD;AAED;;;;;;;AA5WF;;AAAA,UAmXE7E,cAnXF,GAmXE,wBAAgB6E,CAAhB,EAAmBlC,IAAnB,EAAyB;AACvBkC,IAAAA,CAAC,CAACiC,eAAF;AACAjC,IAAAA,CAAC,CAACkC,cAAF;AACAlC,IAAAA,CAAC,CAACmC,aAAF,CAAgBC,KAAhB;;AAHuB,iCAII,KAAKvI,MAAL,CAAYsD,cAAZ,EAJJ;AAAA,QAIftB,OAJe,0BAIfA,OAJe;AAAA,QAIND,KAJM,0BAINA,KAJM;;AAKvB,QAAMU,KAAK,GAAG,KAAK/B,WAAL,CAAiBsB,OAAO,CAAC0B,MAAR,CAAe3B,KAAf,CAAjB,CAAd,CALuB,CAOvB;AACA;;AACA,QAAI,KAAKgC,YAAL,IAAqBoC,CAAC,CAACqC,QAA3B,EAAqC;AACnC,UAAIhD,iBAAJ;;AACA,UAAMiD,SAAS,GAAGhG,KAAK,CAAC+D,OAAN,CAAc,KAAKzC,YAAnB,CAAlB;AACA,UAAM2E,YAAY,GAAGjG,KAAK,CAAC+D,OAAN,CAAcvC,IAAd,CAArB;;AACA,UAAIwE,SAAS,GAAGC,YAAhB,EAA8B;AAC5BlD,QAAAA,iBAAgB,GAAG/C,KAAK,CAACgB,KAAN,CAAYgF,SAAZ,EAAuBC,YAAY,GAAG,CAAtC,CAAnB;AACD,OAFD,MAEO;AACLlD,QAAAA,iBAAgB,GAAG/C,KAAK,CAACgB,KAAN,CAAYiF,YAAZ,EAA0BD,SAAS,GAAG,CAAtC,CAAnB;AACD;;AACD,WAAKzI,MAAL,CAAY6B,cAAZ,CAA2B;AAAE2D,QAAAA,gBAAgB,EAAhBA;AAAF,OAA3B;AACA;AACD;;AAED,SAAKzB,YAAL,GAAoBE,IAApB;;AAtBuB,iCAuBM,KAAKjE,MAAL,CAAYsD,cAAZ,EAvBN;AAAA,QAuBfkC,gBAvBe,0BAuBfA,gBAvBe;;AAwBvB,QAAI,KAAKnE,SAAL,CAAe4C,IAAf,CAAJ,EAA0B;AACxB,WAAKjE,MAAL,CAAY6B,cAAZ,CAA2B;AACzB2D,QAAAA,gBAAgB,EAAEA,gBAAgB,CAACC,MAAjB,CAAwB,UAAC9C,IAAD;AAAA,iBAAUA,IAAI,CAACK,EAAL,KAAYiB,IAAI,CAACjB,EAA3B;AAAA,SAAxB;AADO,OAA3B;AAGD,KAJD,MAIO;AACL,WAAKhD,MAAL,CAAY6B,cAAZ,CAA2B;AACzB2D,QAAAA,gBAAgB,EAAEA,gBAAgB,CAAC9B,MAAjB,CAAwB,CAACO,IAAD,CAAxB;AADO,OAA3B;AAGD;AACF,GApZH;;AAAA,UAsZEE,gBAtZF,GAsZE,0BAAkBF,IAAlB,EAAwB;AACtB,WAAOvF,cAAc,CAAC;AACpB2F,MAAAA,IAAI,EAAEJ,IADc;AAEpBhB,MAAAA,IAAI,EAAEgB,IAAI,CAAChB,IAAL,IAAagB,IAAI,CAACjB,EAFJ;AAGpBsB,MAAAA,IAAI,EAAEL,IAAI,CAACM;AAHS,KAAD,CAArB;AAKD,GA5ZH;;AAAA,UA8ZEtD,UA9ZF,GA8ZE,sBAAc;AAAA;;AACZ,QAAM0H,SAAS,GAAGC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe;AAAE1J,MAAAA,MAAM,EAAEF,SAAS;AAAnB,KAAf,CAAD,CAAtB;AACA,QAAM6J,aAAa,GAAGC,kBAAkB,2BAAyBC,YAAY,CAACC,OAAtC,CAAxC;AACA,QAAMC,IAAI,GAAM,KAAKjJ,QAAL,CAAckJ,OAAd,EAAN,eAAuCT,SAAvC,sBAAiEI,aAA3E;AAEA,QAAMM,UAAU,GAAGC,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkB,QAAlB,CAAnB;;AACA,QAAMK,WAAW,GAAG,SAAdA,WAAc,CAACrD,CAAD,EAAO;AACzB,UAAI,CAAC,MAAI,CAACsD,gBAAL,CAAsBtD,CAAC,CAAC/G,MAAxB,EAAgC,MAAI,CAACY,MAAL,CAAYC,IAAZ,CAAiByJ,qBAAjD,CAAD,IAA4EvD,CAAC,CAAC/B,MAAF,KAAaiF,UAA7F,EAAyG;AACvG,QAAA,MAAI,CAACrJ,MAAL,CAAYmF,IAAZ,CAAiBC,GAAjB,2BAA6Ce,CAAC,CAAC/G,MAA/C,4BAA4E,MAAI,CAACY,MAAL,CAAYC,IAAZ,CAAiByJ,qBAA7F;;AACA;AACD,OAJwB,CAMzB;AACA;;;AACA,UAAMrF,IAAI,GAAG,OAAO8B,CAAC,CAAC9B,IAAT,KAAkB,QAAlB,GAA6BwE,IAAI,CAACc,KAAL,CAAWxD,CAAC,CAAC9B,IAAb,CAA7B,GAAkD8B,CAAC,CAAC9B,IAAjE;;AAEA,UAAI,CAACA,IAAI,CAACuF,KAAV,EAAiB;AACf,QAAA,MAAI,CAAC5J,MAAL,CAAYmF,IAAZ,CAAiBC,GAAjB,CAAqB,wCAArB;;AACA;AACD;;AAEDiE,MAAAA,UAAU,CAACQ,KAAX;AACAP,MAAAA,MAAM,CAACQ,mBAAP,CAA2B,SAA3B,EAAsCN,WAAtC;;AACA,MAAA,MAAI,CAACtJ,QAAL,CAAc6J,YAAd,CAA2B1F,IAAI,CAACuF,KAAhC;;AACA,MAAA,MAAI,CAAC5I,cAAL;AACD,KAnBD;;AAoBAsI,IAAAA,MAAM,CAACU,gBAAP,CAAwB,SAAxB,EAAmCR,WAAnC;AACD,GAzbH;;AAAA,UA2bEC,gBA3bF,GA2bE,0BAAkBrK,MAAlB,EAA0B6K,aAA1B,EAAyC;AACvC,QAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAC7D,KAAD,EAAW;AAC1B,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,eAAO,IAAI8D,MAAJ,OAAe9D,KAAf,OAAP;AACD,OAFD,MAEO,IAAIA,KAAK,YAAY8D,MAArB,EAA6B;AAClC,eAAO9D,KAAP;AACD;AACF,KAND;;AAQA,QAAM+D,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAcL,aAAd,IAA+BA,aAAa,CAAC/B,GAAd,CAAkBgC,QAAlB,CAA/B,GAA6D,CAACA,QAAQ,CAACD,aAAD,CAAT,CAA9E;AACA,WAAOG,QAAQ,CACZ3E,MADI,CACG,UAAC8E,OAAD;AAAA,aAAaA,OAAO,IAAI,IAAxB;AAAA,KADH,EACiC;AADjC,KAEJ7C,IAFI,CAEC,UAAC6C,OAAD;AAAA,aAAaA,OAAO,CAACC,IAAR,CAAapL,MAAb,KAAwBmL,OAAO,CAACC,IAAR,CAAgBpL,MAAhB,OAArC;AAAA,KAFD,CAAP,CAVuC,CAYkC;AAC1E,GAxcH;;AAAA,UA0cEmC,WA1cF,GA0cE,qBAAakJ,KAAb,EAAoB;AAClB,QAAMtF,IAAI,GAAG,KAAKnF,MAAL,CAAYmF,IAAzB;AACAA,IAAAA,IAAI,CAACC,GAAL,CAASqF,KAAK,CAACC,QAAN,EAAT;;AACA,QAAID,KAAK,CAACE,WAAV,EAAuB;AACrB;AACD;;AACD,QAAM9E,OAAO,GAAGV,IAAI,CAACW,IAAL,CAAU,gBAAV,CAAhB;AACAX,IAAAA,IAAI,CAACa,IAAL,CAAU;AAAEH,MAAAA,OAAO,EAAEA,OAAX;AAAoB+E,MAAAA,OAAO,EAAEH,KAAK,CAACC,QAAN;AAA7B,KAAV,EAA2D,OAA3D,EAAoE,IAApE;AACD,GAldH;;AAAA,UAodElJ,YApdF,GAodE,sBAAc2E,CAAd,EAAiB;AAAA;;AACf,QAAM0E,SAAS,GAAG1E,CAAC,CAACC,MAAF,CAAS0E,YAAT,IAAyB3E,CAAC,CAACC,MAAF,CAAS2E,SAAT,GAAqB5E,CAAC,CAACC,MAAF,CAAS4E,YAAvD,CAAlB;AACA,QAAMC,IAAI,GAAG,KAAKzI,YAAL,IAAqB,IAAlC;;AAEA,QAAIqI,SAAS,GAAG,EAAZ,IAAkBI,IAAlB,IAA0B,CAAC,KAAKC,iBAApC,EAAuD;AACrD,WAAKhL,QAAL,CAAciD,IAAd,CAAmB8H,IAAnB,EACGvF,IADH,CACQ,UAACnD,GAAD,EAAS;AAAA,oCACc,MAAI,CAACvC,MAAL,CAAYsD,cAAZ,EADd;AAAA,YACLvB,KADK,yBACLA,KADK;AAAA,YACEC,OADF,yBACEA,OADF;;AAEb,QAAA,MAAI,CAACM,sBAAL,CAA4BC,GAA5B,EAAiCR,KAAjC,EAAwCC,OAAxC;AACD,OAJH,EAIKkE,KAJL,CAIW,KAAK3E,WAJhB,EAKGmE,IALH,CAKQ,YAAM;AAAE,QAAA,MAAI,CAACwF,iBAAL,GAAyB,KAAzB;AAAgC,OALhD,EADqD,CAMH;;AAElD,WAAKA,iBAAL,GAAyB,IAAzB;AACD;AACF,GAleH;;AAAA,UAoeEzJ,YApeF,GAoeE,sBAAcwJ,IAAd,EAAoBlJ,KAApB,EAAkC;AAAA;;AAAA,QAAdA,KAAc;AAAdA,MAAAA,KAAc,GAAN,IAAM;AAAA;;AAChCA,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACA,WAAO,IAAIoJ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,MAAA,MAAI,CAACnL,QAAL,CAAciD,IAAd,CAAmB8H,IAAnB,EAAyBvF,IAAzB,CAA8B,UAACnD,GAAD,EAAS;AACrCA,QAAAA,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkB,UAACC,IAAD,EAAU;AAC1B,cAAI,CAACA,IAAI,CAACC,QAAV,EAAoB;AAClBb,YAAAA,KAAK,CAACc,IAAN,CAAWF,IAAX;AACD,WAFD,MAEO;AACL,YAAA,MAAI,CAACgF,SAAL,CAAehF,IAAf;AACD;AACF,SAND;AAOA,YAAM2I,SAAS,GAAG/I,GAAG,CAACC,YAAJ,IAAoB,IAAtC;;AACA,YAAI8I,SAAJ,EAAe;AACb,iBAAO,MAAI,CAAC7J,YAAL,CAAkB6J,SAAlB,EAA6BvJ,KAA7B,EACJ2D,IADI,CACC,UAAC3D,KAAD;AAAA,mBAAWqJ,OAAO,CAACrJ,KAAD,CAAlB;AAAA,WADD,EAEJmE,KAFI,CAEE,UAAAC,CAAC;AAAA,mBAAIkF,MAAM,CAAClF,CAAD,CAAV;AAAA,WAFH,CAAP;AAGD,SAJD,MAIO;AACL,iBAAOiF,OAAO,CAACrJ,KAAD,CAAd;AACD;AACF,OAhBD,EAgBGmE,KAhBH,CAgBS,UAAAC,CAAC;AAAA,eAAIkF,MAAM,CAAClF,CAAD,CAAV;AAAA,OAhBV;AAiBD,KAlBM,CAAP;AAmBD,GAzfH;;AAAA,UA2fEzE,WA3fF,GA2fE,uBAAe;AAAA;;AAAA,iCACgB,KAAK1B,MAAL,CAAYsD,cAAZ,EADhB;AAAA,QACLkC,gBADK,0BACLA,gBADK;;AAEb,QAAM+F,QAAQ,GAAG/F,gBAAgB,CAAC0C,GAAjB,CAAqB,UAACjE,IAAD,EAAU;AAC9C,UAAIA,IAAI,CAACrB,QAAT,EAAmB;AACjB,eAAO,MAAI,CAAC+E,SAAL,CAAe1D,IAAf,CAAP;AACD,OAFD,MAEO;AACL,eAAO,MAAI,CAACzD,OAAL,CAAayD,IAAb,CAAP;AACD;AACF,KANgB,CAAjB;;AAQA,SAAKf,cAAL,CAAoBiI,OAAO,CAACK,GAAR,CAAYD,QAAZ,CAApB,EAA2C,YAAM;AAC/C,MAAA,MAAI,CAAC3J,cAAL;AACD,KAFD,EAEG,YAAM,CAAE,CAFX;AAGD,GAxgBH;;AAAA,UA0gBED,aA1gBF,GA0gBE,yBAAiB;AACf,SAAKC,cAAL;AAEA,QAAM6J,SAAS,GAAG,KAAKzL,MAAL,CAAYmF,IAAZ,CAAiBuG,SAAjB,CAA2B,WAA3B,CAAlB;AACA,QAAID,SAAJ,EAAeA,SAAS,CAACE,aAAV;AAChB,GA/gBH;;AAAA,UAihBE/J,cAjhBF,GAihBE,0BAAkB;AAChB,SAAK5B,MAAL,CAAY6B,cAAZ,CAA2B;AAAE2D,MAAAA,gBAAgB,EAAE;AAApB,KAA3B;AACD,GAnhBH,CAqhBE;AArhBF;;AAAA,UAshBEtC,cAthBF,GAshBE,wBAAgB0I,OAAhB,EAAyBlG,IAAzB,EAA+BmG,MAA/B,EAAuC;AAAA;;AACrCD,IAAAA,OAAO,CACJlG,IADH,CACQ,UAACoG,MAAD,EAAY;AAChB,MAAA,MAAI,CAAC9L,MAAL,CAAY6B,cAAZ,CAA2B;AAAEiG,QAAAA,OAAO,EAAE;AAAX,OAA3B;;AACApC,MAAAA,IAAI,CAACoG,MAAD,CAAJ;AACD,KAJH,EAIK5F,KAJL,CAIW,UAACb,GAAD,EAAS;AAChB,MAAA,MAAI,CAACrF,MAAL,CAAY6B,cAAZ,CAA2B;AAAEiG,QAAAA,OAAO,EAAE;AAAX,OAA3B;;AACA+D,MAAAA,MAAM,CAACxG,GAAD,CAAN;AACD,KAPH;AAQA,SAAKrF,MAAL,CAAY6B,cAAZ,CAA2B;AAAEiG,MAAAA,OAAO,EAAE;AAAX,KAA3B;AACD,GAhiBH;;AAAA,UAkiBElI,MAliBF,GAkiBE,gBAAQyD,KAAR,EAAe0I,WAAf,EAAiC;AAAA,QAAlBA,WAAkB;AAAlBA,MAAAA,WAAkB,GAAJ,EAAI;AAAA;;AAAA,iCACW,KAAK/L,MAAL,CAAYsD,cAAZ,EADX;AAAA,QACvBxB,aADuB,0BACvBA,aADuB;AAAA,QACRgB,cADQ,0BACRA,cADQ;;AAE/B,QAAI,CAACA,cAAL,EAAqB;AACnB,WAAK9B,cAAL;AACD,KAJ8B,CAM/B;AACA;;;AACA,QAAI,KAAKhB,MAAL,CAAYsD,cAAZ,GAA6BwE,OAAjC,EAA0C;AACxC,aACE,EAAC,YAAD;AAAc,QAAA,SAAS,EAAE,KAAKlG;AAA9B,SACE,EAAC,UAAD;AAAY,QAAA,IAAI,EAAE,KAAK5B,MAAL,CAAYmF,IAAZ,CAAiBW;AAAnC,QADF,CADF;AAKD;;AAED,QAAI,CAAChE,aAAL,EAAoB;AAClB,aACE,EAAC,YAAD;AAAc,QAAA,SAAS,EAAE,KAAKF;AAA9B,SACE,EAAC,QAAD;AACE,QAAA,UAAU,EAAE,KAAK5B,MAAL,CAAY2D,KAD1B;AAEE,QAAA,UAAU,EAAE,KAAK3D,MAAL,CAAYgM,IAF1B;AAGE,QAAA,UAAU,EAAE,KAAK/K,UAHnB;AAIE,QAAA,IAAI,EAAE,KAAKjB,MAAL,CAAYmF,IAAZ,CAAiBW,IAJzB;AAKE,QAAA,SAAS,EAAE,KAAK9F,MAAL,CAAYmF,IAAZ,CAAiB8G;AAL9B,QADF,CADF;AAWD;;AAED,QAAMC,iBAAiB,gBAAQ,KAAKjM,IAAb,EAAsB8L,WAAtB,CAAvB;;AACA,QAAMI,YAAY,GAAG,SAAc,EAAd,EAAkB,KAAKnM,MAAL,CAAYsD,cAAZ,EAAlB,EAAgD;AACnEM,MAAAA,QAAQ,EAAE,KAAKA,QADoD;AAEnE9C,MAAAA,aAAa,EAAE,KAAKA,aAF+C;AAGnED,MAAAA,SAAS,EAAE,KAAKA,SAHmD;AAInEH,MAAAA,WAAW,EAAE,KAAKA,WAJiD;AAKnEC,MAAAA,WAAW,EAAE,KAAKA,WALiD;AAMnEC,MAAAA,YAAY,EAAE,KAAKA,YANgD;AAOnEM,MAAAA,WAAW,EAAE,KAAKA,WAPiD;AAQnEC,MAAAA,UAAU,EAAE,KAAKA,UARkD;AASnEJ,MAAAA,MAAM,EAAE,KAAKA,MATsD;AAUnEK,MAAAA,WAAW,EAAE,KAAKA,WAViD;AAWnEC,MAAAA,SAAS,EAAE,KAAKA,SAXmD;AAYnEC,MAAAA,cAAc,EAAE,KAAKA,cAZ8C;AAanEE,MAAAA,YAAY,EAAE,KAAKA,YAbgD;AAcnEC,MAAAA,YAAY,EAAE,KAAKA,YAdgD;AAenE2K,MAAAA,IAAI,EAAE,KAAK1K,WAfwD;AAgBnE2K,MAAAA,MAAM,EAAE,KAAK1K,aAhBsD;AAiBnEgC,MAAAA,KAAK,EAAE,KAAK3D,MAAL,CAAY2D,KAjBgD;AAkBnEvD,MAAAA,QAAQ,EAAE8L,iBAAiB,CAAC9L,QAlBuC;AAmBnEC,MAAAA,UAAU,EAAE6L,iBAAiB,CAAC7L,UAnBqC;AAoBnEC,MAAAA,UAAU,EAAE4L,iBAAiB,CAAC5L,UApBqC;AAqBnEC,MAAAA,eAAe,EAAE2L,iBAAiB,CAAC3L,eArBgC;AAsBnE+L,MAAAA,UAAU,EAAE,KAAKtM,MAAL,CAAYgM,IAtB2C;AAuBnElG,MAAAA,IAAI,EAAE,KAAK9F,MAAL,CAAYmF,IAAZ,CAAiBW;AAvB4C,KAAhD,CAArB;;AA0BA,WACE,EAAC,YAAD;AAAc,MAAA,SAAS,EAAE,KAAKlE;AAA9B,OACE,EAAC,OAAD,EAAauK,YAAb,CADF,CADF;AAKD,GAhmBH;;AAAA;AAAA,YACSjD,OADT","sourcesContent":["const { h, Component } = require('preact')\nconst AuthView = require('./AuthView')\nconst Browser = require('./Browser')\nconst LoaderView = require('./Loader')\nconst generateFileID = require('@uppy/utils/lib/generateFileID')\nconst getFileType = require('@uppy/utils/lib/getFileType')\nconst isPreviewSupported = require('@uppy/utils/lib/isPreviewSupported')\n\n/**\n * Array.prototype.findIndex ponyfill for old browsers.\n */\nfunction findIndex (array, predicate) {\n  for (let i = 0; i < array.length; i++) {\n    if (predicate(array[i])) return i\n  }\n  return -1\n}\n\n// location.origin does not exist in IE\nfunction getOrigin () {\n  if ('origin' in location) {\n    return location.origin // eslint-disable-line compat/compat\n  }\n  return `${location.protocol}//${location.hostname}${location.port ? `:${location.port}` : ''}`\n}\n\nclass CloseWrapper extends Component {\n  componentWillUnmount () {\n    this.props.onUnmount()\n  }\n\n  render () {\n    return this.props.children[0]\n  }\n}\n\n/**\n * Class to easily generate generic views for Provider plugins\n */\nmodule.exports = class ProviderView {\n  static VERSION = require('../package.json').version\n\n  /**\n   * @param {object} plugin instance of the plugin\n   * @param {object} opts\n   */\n  constructor (plugin, opts) {\n    this.plugin = plugin\n    this.provider = opts.provider\n\n    // set default options\n    const defaultOptions = {\n      viewType: 'list',\n      showTitles: true,\n      showFilter: true,\n      showBreadcrumbs: true\n    }\n\n    // merge default options with the ones set by user\n    this.opts = { ...defaultOptions, ...opts }\n\n    // Logic\n    this.addFile = this.addFile.bind(this)\n    this.filterItems = this.filterItems.bind(this)\n    this.filterQuery = this.filterQuery.bind(this)\n    this.toggleSearch = this.toggleSearch.bind(this)\n    this.getFolder = this.getFolder.bind(this)\n    this.getNextFolder = this.getNextFolder.bind(this)\n    this.logout = this.logout.bind(this)\n    this.preFirstRender = this.preFirstRender.bind(this)\n    this.handleAuth = this.handleAuth.bind(this)\n    this.sortByTitle = this.sortByTitle.bind(this)\n    this.sortByDate = this.sortByDate.bind(this)\n    this.isActiveRow = this.isActiveRow.bind(this)\n    this.isChecked = this.isChecked.bind(this)\n    this.toggleCheckbox = this.toggleCheckbox.bind(this)\n    this.handleError = this.handleError.bind(this)\n    this.handleScroll = this.handleScroll.bind(this)\n    this.listAllFiles = this.listAllFiles.bind(this)\n    this.donePicking = this.donePicking.bind(this)\n    this.cancelPicking = this.cancelPicking.bind(this)\n    this.clearSelection = this.clearSelection.bind(this)\n\n    // Visual\n    this.render = this.render.bind(this)\n\n    this.clearSelection()\n\n    // Set default state for the plugin\n    this.plugin.setPluginState({\n      authenticated: false,\n      files: [],\n      folders: [],\n      directories: [],\n      activeRow: -1,\n      filterInput: '',\n      isSearchVisible: false\n    })\n  }\n\n  tearDown () {\n    // Nothing.\n  }\n\n  _updateFilesAndFolders (res, files, folders) {\n    this.nextPagePath = res.nextPagePath\n    res.items.forEach((item) => {\n      if (item.isFolder) {\n        folders.push(item)\n      } else {\n        files.push(item)\n      }\n    })\n\n    this.plugin.setPluginState({ folders, files })\n  }\n\n  /**\n   * Called only the first time the provider view is rendered.\n   * Kind of like an init function.\n   */\n  preFirstRender () {\n    this.plugin.setPluginState({ didFirstRender: true })\n    this.plugin.onFirstRender()\n  }\n\n  /**\n   * Based on folder ID, fetch a new folder and update it to state\n   *\n   * @param  {string} id Folder id\n   * @returns {Promise}   Folders/files in folder\n   */\n  getFolder (id, name) {\n    return this._loaderWrapper(\n      this.provider.list(id),\n      (res) => {\n        const folders = []\n        const files = []\n        let updatedDirectories\n\n        const state = this.plugin.getPluginState()\n        const index = findIndex(state.directories, (dir) => id === dir.id)\n\n        if (index !== -1) {\n          updatedDirectories = state.directories.slice(0, index + 1)\n        } else {\n          updatedDirectories = state.directories.concat([{ id, title: name }])\n        }\n\n        this.username = res.username || this.username\n        this._updateFilesAndFolders(res, files, folders)\n        this.plugin.setPluginState({ directories: updatedDirectories })\n      },\n      this.handleError)\n  }\n\n  /**\n   * Fetches new folder\n   *\n   * @param  {object} folder\n   * @param  {string} title Folder title\n   */\n  getNextFolder (folder) {\n    this.getFolder(folder.requestPath, folder.name)\n    this.lastCheckbox = undefined\n  }\n\n  addFile (file) {\n    const tagFile = {\n      id: this.providerFileToId(file),\n      source: this.plugin.id,\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType,\n      isRemote: true,\n      body: {\n        fileId: file.id\n      },\n      remote: {\n        companionUrl: this.plugin.opts.companionUrl,\n        url: `${this.provider.fileUrl(file.requestPath)}`,\n        body: {\n          fileId: file.id\n        },\n        providerOptions: this.provider.opts\n      }\n    }\n\n    const fileType = getFileType(tagFile)\n    // TODO Should we just always use the thumbnail URL if it exists?\n    if (fileType && isPreviewSupported(fileType)) {\n      tagFile.preview = file.thumbnail\n    }\n    this.plugin.uppy.log('Adding remote file')\n    try {\n      this.plugin.uppy.addFile(tagFile)\n      return true\n    } catch (err) {\n      if (!err.isRestriction) {\n        this.plugin.uppy.log(err)\n      }\n      return false\n    }\n  }\n\n  removeFile (id) {\n    const { currentSelection } = this.plugin.getPluginState()\n    this.plugin.setPluginState({\n      currentSelection: currentSelection.filter((file) => file.id !== id)\n    })\n  }\n\n  /**\n   * Removes session token on client side.\n   */\n  logout () {\n    this.provider.logout()\n      .then((res) => {\n        if (res.ok) {\n          if (!res.revoked) {\n            const message = this.plugin.uppy.i18n('companionUnauthorizeHint', {\n              provider: this.plugin.title,\n              url: res.manual_revoke_url\n            })\n            this.plugin.uppy.info(message, 'info', 7000)\n          }\n\n          const newState = {\n            authenticated: false,\n            files: [],\n            folders: [],\n            directories: []\n          }\n          this.plugin.setPluginState(newState)\n        }\n      }).catch(this.handleError)\n  }\n\n  filterQuery (e) {\n    const state = this.plugin.getPluginState()\n    this.plugin.setPluginState(Object.assign({}, state, {\n      filterInput: e ? e.target.value : ''\n    }))\n  }\n\n  toggleSearch (inputEl) {\n    const state = this.plugin.getPluginState()\n\n    this.plugin.setPluginState({\n      isSearchVisible: !state.isSearchVisible,\n      filterInput: ''\n    })\n  }\n\n  filterItems (items) {\n    const state = this.plugin.getPluginState()\n    if (!state.filterInput || state.filterInput === '') {\n      return items\n    }\n    return items.filter((folder) => {\n      return folder.name.toLowerCase().indexOf(state.filterInput.toLowerCase()) !== -1\n    })\n  }\n\n  sortByTitle () {\n    const state = Object.assign({}, this.plugin.getPluginState())\n    const { files, folders, sorting } = state\n\n    const sortedFiles = files.sort((fileA, fileB) => {\n      if (sorting === 'titleDescending') {\n        return fileB.name.localeCompare(fileA.name)\n      }\n      return fileA.name.localeCompare(fileB.name)\n    })\n\n    const sortedFolders = folders.sort((folderA, folderB) => {\n      if (sorting === 'titleDescending') {\n        return folderB.name.localeCompare(folderA.name)\n      }\n      return folderA.name.localeCompare(folderB.name)\n    })\n\n    this.plugin.setPluginState(Object.assign({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: (sorting === 'titleDescending') ? 'titleAscending' : 'titleDescending'\n    }))\n  }\n\n  sortByDate () {\n    const state = Object.assign({}, this.plugin.getPluginState())\n    const { files, folders, sorting } = state\n\n    const sortedFiles = files.sort((fileA, fileB) => {\n      const a = new Date(fileA.modifiedDate)\n      const b = new Date(fileB.modifiedDate)\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0\n      }\n      return a > b ? 1 : a < b ? -1 : 0\n    })\n\n    const sortedFolders = folders.sort((folderA, folderB) => {\n      const a = new Date(folderA.modifiedDate)\n      const b = new Date(folderB.modifiedDate)\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0\n      }\n\n      return a > b ? 1 : a < b ? -1 : 0\n    })\n\n    this.plugin.setPluginState(Object.assign({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: (sorting === 'dateDescending') ? 'dateAscending' : 'dateDescending'\n    }))\n  }\n\n  sortBySize () {\n    const state = Object.assign({}, this.plugin.getPluginState())\n    const { files, sorting } = state\n\n    // check that plugin supports file sizes\n    if (!files.length || !this.plugin.getItemData(files[0]).size) {\n      return\n    }\n\n    const sortedFiles = files.sort((fileA, fileB) => {\n      const a = fileA.size\n      const b = fileB.size\n\n      if (sorting === 'sizeDescending') {\n        return a > b ? -1 : a < b ? 1 : 0\n      }\n      return a > b ? 1 : a < b ? -1 : 0\n    })\n\n    this.plugin.setPluginState(Object.assign({}, state, {\n      files: sortedFiles,\n      sorting: (sorting === 'sizeDescending') ? 'sizeAscending' : 'sizeDescending'\n    }))\n  }\n\n  isActiveRow (file) {\n    return this.plugin.getPluginState().activeRow === this.plugin.getItemId(file)\n  }\n\n  isChecked (file) {\n    const { currentSelection } = this.plugin.getPluginState()\n    // comparing id instead of the file object, because the reference to the object\n    // changes when we switch folders, and the file list is updated\n    return currentSelection.some((item) => item.id === file.id)\n  }\n\n  /**\n   * Adds all files found inside of specified folder.\n   *\n   * Uses separated state while folder contents are being fetched and\n   * mantains list of selected folders, which are separated from files.\n   */\n  addFolder (folder) {\n    const folderId = this.providerFileToId(folder)\n    const state = this.plugin.getPluginState()\n    const folders = { ...state.selectedFolders }\n    if (folderId in folders && folders[folderId].loading) {\n      return\n    }\n    folders[folderId] = { loading: true, files: [] }\n    this.plugin.setPluginState({ selectedFolders: { ...folders } })\n    return this.listAllFiles(folder.requestPath).then((files) => {\n      let count = 0\n      files.forEach((file) => {\n        const success = this.addFile(file)\n        if (success) count++\n      })\n      const ids = files.map(this.providerFileToId)\n      folders[folderId] = {\n        loading: false,\n        files: ids\n      }\n      this.plugin.setPluginState({ selectedFolders: folders })\n\n      let message\n      if (files.length) {\n        message = this.plugin.uppy.i18n('folderAdded', {\n          smart_count: count, folder: folder.name\n        })\n      } else {\n        message = this.plugin.uppy.i18n('emptyFolderAdded')\n      }\n      this.plugin.uppy.info(message)\n    }).catch((e) => {\n      const state = this.plugin.getPluginState()\n      const selectedFolders = { ...state.selectedFolders }\n      delete selectedFolders[folderId]\n      this.plugin.setPluginState({ selectedFolders })\n      this.handleError(e)\n    })\n  }\n\n  /**\n   * Toggles file/folder checkbox to on/off state while updating files list.\n   *\n   * Note that some extra complexity comes from supporting shift+click to\n   * toggle multiple checkboxes at once, which is done by getting all files\n   * in between last checked file and current one.\n   */\n  toggleCheckbox (e, file) {\n    e.stopPropagation()\n    e.preventDefault()\n    e.currentTarget.focus()\n    const { folders, files } = this.plugin.getPluginState()\n    const items = this.filterItems(folders.concat(files))\n\n    // Shift-clicking selects a single consecutive list of items\n    // starting at the previous click and deselects everything else.\n    if (this.lastCheckbox && e.shiftKey) {\n      let currentSelection\n      const prevIndex = items.indexOf(this.lastCheckbox)\n      const currentIndex = items.indexOf(file)\n      if (prevIndex < currentIndex) {\n        currentSelection = items.slice(prevIndex, currentIndex + 1)\n      } else {\n        currentSelection = items.slice(currentIndex, prevIndex + 1)\n      }\n      this.plugin.setPluginState({ currentSelection })\n      return\n    }\n\n    this.lastCheckbox = file\n    const { currentSelection } = this.plugin.getPluginState()\n    if (this.isChecked(file)) {\n      this.plugin.setPluginState({\n        currentSelection: currentSelection.filter((item) => item.id !== file.id)\n      })\n    } else {\n      this.plugin.setPluginState({\n        currentSelection: currentSelection.concat([file])\n      })\n    }\n  }\n\n  providerFileToId (file) {\n    return generateFileID({\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType\n    })\n  }\n\n  handleAuth () {\n    const authState = btoa(JSON.stringify({ origin: getOrigin() }))\n    const clientVersion = encodeURIComponent(`@uppy/provider-views=${ProviderView.VERSION}`)\n    const link = `${this.provider.authUrl()}?state=${authState}&uppyVersions=${clientVersion}`\n\n    const authWindow = window.open(link, '_blank')\n    const handleToken = (e) => {\n      if (!this._isOriginAllowed(e.origin, this.plugin.opts.companionAllowedHosts) || e.source !== authWindow) {\n        this.plugin.uppy.log(`rejecting event from ${e.origin} vs allowed pattern ${this.plugin.opts.companionAllowedHosts}`)\n        return\n      }\n\n      // Check if it's a string before doing the JSON.parse to maintain support\n      // for older Companion versions that used object references\n      const data = typeof e.data === 'string' ? JSON.parse(e.data) : e.data\n\n      if (!data.token) {\n        this.plugin.uppy.log('did not receive token from auth window')\n        return\n      }\n\n      authWindow.close()\n      window.removeEventListener('message', handleToken)\n      this.provider.setAuthToken(data.token)\n      this.preFirstRender()\n    }\n    window.addEventListener('message', handleToken)\n  }\n\n  _isOriginAllowed (origin, allowedOrigin) {\n    const getRegex = (value) => {\n      if (typeof value === 'string') {\n        return new RegExp(`^${value}$`)\n      } else if (value instanceof RegExp) {\n        return value\n      }\n    }\n\n    const patterns = Array.isArray(allowedOrigin) ? allowedOrigin.map(getRegex) : [getRegex(allowedOrigin)]\n    return patterns\n      .filter((pattern) => pattern != null) // loose comparison to catch undefined\n      .some((pattern) => pattern.test(origin) || pattern.test(`${origin}/`)) // allowing for trailing '/'\n  }\n\n  handleError (error) {\n    const uppy = this.plugin.uppy\n    uppy.log(error.toString())\n    if (error.isAuthError) {\n      return\n    }\n    const message = uppy.i18n('companionError')\n    uppy.info({ message: message, details: error.toString() }, 'error', 5000)\n  }\n\n  handleScroll (e) {\n    const scrollPos = e.target.scrollHeight - (e.target.scrollTop + e.target.offsetHeight)\n    const path = this.nextPagePath || null\n\n    if (scrollPos < 50 && path && !this._isHandlingScroll) {\n      this.provider.list(path)\n        .then((res) => {\n          const { files, folders } = this.plugin.getPluginState()\n          this._updateFilesAndFolders(res, files, folders)\n        }).catch(this.handleError)\n        .then(() => { this._isHandlingScroll = false }) // always called\n\n      this._isHandlingScroll = true\n    }\n  }\n\n  listAllFiles (path, files = null) {\n    files = files || []\n    return new Promise((resolve, reject) => {\n      this.provider.list(path).then((res) => {\n        res.items.forEach((item) => {\n          if (!item.isFolder) {\n            files.push(item)\n          } else {\n            this.addFolder(item)\n          }\n        })\n        const moreFiles = res.nextPagePath || null\n        if (moreFiles) {\n          return this.listAllFiles(moreFiles, files)\n            .then((files) => resolve(files))\n            .catch(e => reject(e))\n        } else {\n          return resolve(files)\n        }\n      }).catch(e => reject(e))\n    })\n  }\n\n  donePicking () {\n    const { currentSelection } = this.plugin.getPluginState()\n    const promises = currentSelection.map((file) => {\n      if (file.isFolder) {\n        return this.addFolder(file)\n      } else {\n        return this.addFile(file)\n      }\n    })\n\n    this._loaderWrapper(Promise.all(promises), () => {\n      this.clearSelection()\n    }, () => {})\n  }\n\n  cancelPicking () {\n    this.clearSelection()\n\n    const dashboard = this.plugin.uppy.getPlugin('Dashboard')\n    if (dashboard) dashboard.hideAllPanels()\n  }\n\n  clearSelection () {\n    this.plugin.setPluginState({ currentSelection: [] })\n  }\n\n  // displays loader view while asynchronous request is being made.\n  _loaderWrapper (promise, then, catch_) {\n    promise\n      .then((result) => {\n        this.plugin.setPluginState({ loading: false })\n        then(result)\n      }).catch((err) => {\n        this.plugin.setPluginState({ loading: false })\n        catch_(err)\n      })\n    this.plugin.setPluginState({ loading: true })\n  }\n\n  render (state, viewOptions = {}) {\n    const { authenticated, didFirstRender } = this.plugin.getPluginState()\n    if (!didFirstRender) {\n      this.preFirstRender()\n    }\n\n    // reload pluginState for \"loading\" attribute because it might\n    // have changed above.\n    if (this.plugin.getPluginState().loading) {\n      return (\n        <CloseWrapper onUnmount={this.clearSelection}>\n          <LoaderView i18n={this.plugin.uppy.i18n} />\n        </CloseWrapper>\n      )\n    }\n\n    if (!authenticated) {\n      return (\n        <CloseWrapper onUnmount={this.clearSelection}>\n          <AuthView\n            pluginName={this.plugin.title}\n            pluginIcon={this.plugin.icon}\n            handleAuth={this.handleAuth}\n            i18n={this.plugin.uppy.i18n}\n            i18nArray={this.plugin.uppy.i18nArray}\n          />\n        </CloseWrapper>\n      )\n    }\n\n    const targetViewOptions = { ...this.opts, ...viewOptions }\n    const browserProps = Object.assign({}, this.plugin.getPluginState(), {\n      username: this.username,\n      getNextFolder: this.getNextFolder,\n      getFolder: this.getFolder,\n      filterItems: this.filterItems,\n      filterQuery: this.filterQuery,\n      toggleSearch: this.toggleSearch,\n      sortByTitle: this.sortByTitle,\n      sortByDate: this.sortByDate,\n      logout: this.logout,\n      isActiveRow: this.isActiveRow,\n      isChecked: this.isChecked,\n      toggleCheckbox: this.toggleCheckbox,\n      handleScroll: this.handleScroll,\n      listAllFiles: this.listAllFiles,\n      done: this.donePicking,\n      cancel: this.cancelPicking,\n      title: this.plugin.title,\n      viewType: targetViewOptions.viewType,\n      showTitles: targetViewOptions.showTitles,\n      showFilter: targetViewOptions.showFilter,\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      pluginIcon: this.plugin.icon,\n      i18n: this.plugin.uppy.i18n\n    })\n\n    return (\n      <CloseWrapper onUnmount={this.clearSelection}>\n        <Browser {...browserProps} />\n      </CloseWrapper>\n    )\n  }\n}\n"]}